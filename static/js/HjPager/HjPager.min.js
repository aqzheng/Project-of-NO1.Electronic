(function(){"use strict";var d={on:function(n,t,o,r){n.addEventListener(t,function(t){var e=t.target;if(!Element.prototype.matches){Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){var e=(this.document||this.ownerDocument).querySelectorAll(t),n=e.length;while(--n>=0&&e.item(n)!==this){}return n>-1}}while(!e.matches(o)){if(n===e){e=null;break}e=e.parentNode}e&&r.call(e,t,e)});return n},create:function(t,e){var n=document.createElement("template");if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}n.innerHTML=t.trim();var o=n.content?n.content.firstChild:n.childNodes[0];if(e)this.append(o,e);return o},append:function(t,e){if(e.length===undefined)e=[e];for(var n=0;n<e.length;n++){t.appendChild(e[n])}return t},paraType:function(t){return Object.prototype.toString.call(t)}};var a=encodeURIComponent,r=decodeURIComponent;function o(t){var e=this;var n={element:null,buttonCount:5,currentPage:1,totalPage:1,pageQuery:"",globalJump:false,firstBtn:false,lastBtn:false,templates:{number:"%page%",prev:"<button class=prev>上一页</button>",next:"<button class=next>下一页</button>",first:"<button class=first>首页</button>",last:"<button class=last>末页</button>"},pageChange:function(t){}};if(!(e instanceof o))throw new TypeError("Cannot call a class as a function");e.options=e.extend(n,t);e.domRefs={};e.currentPage=parseInt(e.options.currentPage,10)||1;if(e.currentPage>e.options.totalPage)e.currentPage=e.options.totalPage;e.checkOptions().initHtml().bindEvents()}o.get=function(t){function e(t){var e=t.replace(/^\?/,""),n={},o=[];if(!e)return n;e.split("&").filter(function(t){return t}).forEach(function(t,e){o=t.split("=");n[o[0]]=r(o[1])});return n}if(!arguments.length)return e(location.search);return e(location.search)[t]};o.set=function(t,e){var n=location.search;function o(t,e,o){var n=new RegExp("("+a(e)+")=([^&]*)","");if(n.test(t)){return t.replace(n,function(t,e,n){return e+"="+a(o)})}return t.replace(/&?$/,"&"+a(e)+"="+a(o))}if(arguments.length===1&&d.paraType(t)==="[object Object]"){for(var r in arguments[0]){if(arguments[0].hasOwnProperty(r))n=o(n,r,arguments[0][r])}}else{n=o(n,t,e)}location.search=n};o.prototype={extend:function(){var t=arguments.length,e=1,n=arguments[0]||{};if(Object.prototype.toString.call(n)!=="[object Object]")n={};if(e===t){n=this;e--}for(;e<t;e++){if(arguments[e]!=null){for(var o in arguments[e]){if(arguments[e][o]!==undefined&&arguments[e].hasOwnProperty(o))n[o]=arguments[e][o]}}}return n},checkOptions:function(){if(!this.options.element)throw new Error("element is required");return this},bindEvents:function(){var n=this;d.on(n.options.element,"click",'ol[data-role="pageNumbers"]>li',function(t,e){t.stopPropagation();n.goToPage(parseInt(e.dataset?e.dataset.page:e.textContent,10))});n.options.firstBtn&&n.domRefs.first.addEventListener("click",function(t){t.stopPropagation();n.goToPage(1)});n.options.lastBtn&&n.domRefs.last.addEventListener("click",function(t){t.stopPropagation();n.goToPage(n.options.totalPage)});n.domRefs.prev.addEventListener("click",function(t){t.stopPropagation();n.goToPage(n.currentPage-1)});n.domRefs.next.addEventListener("click",function(t){t.stopPropagation();n.goToPage(n.currentPage+1)});n.options.element.addEventListener("pageChange",function(t){n.options.pageChange(t)});n.options.globalJump&&n.domRefs.globalJump.addEventListener("click",function(t){t.stopPropagation();var e=parseInt(n.domRefs.input.value,10);n.domRefs.input.value="";if(!e||e>n.options.totalPage||e===n.currentPage||e<0)return;n.goToPage(e)})},goToPage:function(t){var e=this;if(d.paraType(t)!=="[object Number]")t=parseInt(t,10);if(!t||t>e.options.totalPage||t===e.currentPage||t<0)return;if(e.options.pageQuery==="page"){o.set(e.options.pageQuery,t)}else{e.options.pageChange(t)}e.currentPage=t;e.reRender()},reRender:function(){var t=this,e,n;t._checkButtons();e=t._createNumbers();n=t.domRefs.numbers;n.parentNode.replaceChild(e,n);t.domRefs.numbers=e},initHtml:function(){var t=this,e=t.domRefs.pager=document.createElement("div");t.domRefs.first=t.options.firstBtn?d.create(t.options.templates.first):null;t.domRefs.prev=d.create(t.options.templates.prev);t.domRefs.next=d.create(t.options.templates.next);t.domRefs.last=t.options.lastBtn?d.create(t.options.templates.last):null;t._checkButtons();t.domRefs.numbers=t._createNumbers();t.options.firstBtn&&e.appendChild(t.domRefs.first);e.appendChild(t.domRefs.prev);e.appendChild(t.domRefs.numbers);e.appendChild(t.domRefs.next);t.options.lastBtn&&e.appendChild(t.domRefs.last);if(t.options.globalJump&&d.paraType(t.options.globalJump)==="[object Boolean]"){var n=d.create('<span class="jump-title">共'+t.options.totalPage+"页，跳转到：</span>");t.domRefs.input=d.create('<input class="jump-input">');t.domRefs.globalJump=d.create('<button class="jump-btn">确认</button>>');e.appendChild(n);e.appendChild(t.domRefs.input);e.appendChild(t.domRefs.globalJump)}else{t.options.globalJump=false}t.options.element.innerHTML="";t.options.element.appendChild(e);t.options.element=e;return t},_checkButtons:function(){var t=this,e="disabled";if(t.currentPage===1){t.options.firstBtn&&t.domRefs.first.setAttribute(e,"");t.domRefs.prev.setAttribute(e,"")}else{t.options.firstBtn&&t.domRefs.first.removeAttribute(e);t.domRefs.prev.removeAttribute(e)}if(t.currentPage===t.options.totalPage){t.domRefs.next.setAttribute(e,"");t.options.lastBtn&&t.domRefs.last.setAttribute(e,"")}else{t.domRefs.next.removeAttribute(e);t.options.lastBtn&&t.domRefs.last.removeAttribute(e)}},_createNumbers:function(){var t=this,e=t.currentPage,n=t.options,o=n.buttonCount,r=n.totalPage;var a=Math.max(e-Math.round(o/2)+1,1),s=Math.min(a+o-1,r),i=Math.min(e+Math.round(o/2)-1,r),p=Math.max(i-o+1,1),l=Math.min(a,p),c=Math.max(s,i);var u=d.create('<ol data-role="pageNumbers"></ol>');for(var f=l;f<=c;f++){var m=d.create('<li data-page="'+f+'"'+(f>99999?' title="'+f+'"':"")+">"+t.options.templates.number.replace("%page%",f)+"</li>");if(f===e)m.classList?m.classList.add("current"):m.className="current";u.appendChild(m)}return u}};window.HjPager=o;return o})();